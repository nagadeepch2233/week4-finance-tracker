import json
import os
from .expense import Expense
from datetime import datetime

DATA_FILE = "data/expenses.json"
BACKUP_DIR = "data/backup"

def backup_expenses():
    if not os.path.exists(DATA_FILE):
        print("No expenses to backup.")
        return
    os.makedirs(BACKUP_DIR, exist_ok=True)
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    backup_file = os.path.join(BACKUP_DIR, f"expenses_backup_{timestamp}.json")
    with open(DATA_FILE) as f:
        data = json.load(f)
    with open(backup_file, "w") as f:
        json.dump(data, f, indent=4)
    print(f"Backup created: {backup_file}")
